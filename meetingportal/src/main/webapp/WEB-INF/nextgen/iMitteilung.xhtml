<!--

     Copyright 2025 Better Orange IR & HV AG

     Licensed under the Meetingbase License (the "License");
     Vou may not use this file except in compliance with the License.
     You may obtain a copy of the License in the root directory (MEETINGBASE_LICENSE).

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.

-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:faces="jakarta.faces" xmlns:ui="jakarta.faces.facelets"
    xmlns:pt="jakarta.faces.passthrough" xmlns:f="jakarta.faces.core" xmlns:h="jakarta.faces.html" lang="de">

    <f:subview id="iMitteilungOben">
        <ui:include src="idetail/idSeiteStartModals.xhtml" />
    </f:subview>

    <div class="modal-body">
        <div class="container-fluid">

            <!-- ++++++++++++++++++++++Websocket+++++++++++++++++++++++ -->

            <script>
                jwtWsTokenMitteilungen = '#{tSession.jwtWsToken}';
            </script>

            <!-- ++++++++++++++++++++++Mitteilung eingeben+++++++++++++++++++++++ -->
            <!-- Starttext (Mitteilungstellung ist gerade aktiv) -->
            <h:panelGroup rendered="#{tMitteilungSession.funktionIstAktiv}">
                <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrStarttextAktiv)}"
                    styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrStarttextAktiv)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
            </h:panelGroup>

            <!-- Starttext (Mitteilungstellung ist gerade inaktiv) -->
            <h:panelGroup rendered="#{!tMitteilungSession.funktionIstAktiv}">
                <h:panelGroup
                    rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrStarttextInaktiv)}"
                    styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrStarttextInaktiv)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
            </h:panelGroup>

            <!-- Mitteilung ist gerade aktiv -->
            <h:panelGroup rendered="#{tMitteilungSession.funktionIstAktiv}">

                <!-- ausgangsView -->
                <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==1}">

                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrAusgangsViewStarttext)}"
                        styleClass="row mt-2">
                        <div class="col">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrAusgangsViewStarttext)}"
                                    escape="false" />
                            </p>
                        </div>
                    </h:panelGroup>
                    <div class="row mt-2">
                        <div class="col">
                            <h:commandButton
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrAusgangsViewButtonStart)}"
                                id="buttonMitteilungStart" action="#{tMitteilung.doMitteilungStart()}"
                                styleClass="btn btn-outline-primary">
                                <f:ajax execute="@all" render="@form"
                                    onevent="function(data) {nachAjaxButton(data, 'true', 'true', 'mainInhaltModal', 'mainInhaltModal', 'true')}" />
                            </h:commandButton>
                        </div>
                    </div>
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrAusgangsViewEndetext)}"
                        styleClass="row mt-2">
                        <div class="col">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrAusgangsViewEndetext)}"
                                    escape="false" />
                            </p>
                        </div>
                    </h:panelGroup>

                    <!-- bei Wortmeldungen: ggf. Videokonferenz-Refresh-Button anzeigen -->
                    <!-- ??????????????????????????????????????????????????????Videokonferenz???????????????????????????????????????????? -->
                    <h:panelGroup rendered="#{tMitteilungSession.artDerMitteilung==3}">
                        <h:panelGroup rendered="#{eclParamM.liefereWortmeldungenAlsVideokonferenz()}">

                            <!-- Bedingung könnte noch verbessert werden, bzw. zusätzliche Punkte abgefragt werden ??????? -->
                            <h:panelGroup
                                rendered="#{tMitteilungSession.anzahlMitteilungenGestelltOhneZurueckgezogen>0}">


                                <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzInTestraumKommen()}">
                                    <script>
                                        endFullscreen();
                                        showModal('socket-modal-wortmeldung-ts-wmt', "true");
                                    </script>
                                </h:panelGroup>

                                <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzTestraumVerlassen()}">
                                    <script>
                                        endFullscreen();
                                        showModal('socket-modal-wortmeldung-tv-wmt', "true");
                                    </script>
                                </h:panelGroup>

                                <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzInRederaumKommen()}">
                                    <script>
                                        endFullscreen();
                                        showModal('socket-modal-wortmeldung-rs-wmt', "true");
                                    </script>
                                </h:panelGroup>

                                <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzRederaumVerlassen()}">
                                    <script>
                                        endFullscreen();
                                        showModal('socket-modal-wortmeldung-rv-wmt', "true");
                                    </script>
                                </h:panelGroup>

                                <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzInRederaumSprechen()}">
                                    <script>
                                        endFullscreen();
                                        showModal('socket-modal-wortmeldung-sp-wmt', "true");
                                    </script>
                                </h:panelGroup>


                                <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden('2093')}"
                                    styleClass="row mt-2">
                                    <div class="col">
                                        <p>
                                            <h:outputText value="#{eclPortalTexteM.holeText('2093')}" escape="false" />
                                        </p>
                                    </div>
                                </h:panelGroup>


                            </h:panelGroup>


                        </h:panelGroup>

                    </h:panelGroup>
                </h:panelGroup>


                <!-- personBestaetigen -->
                <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==3}">
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrPersonBestaetigenStarttext)}"
                        styleClass="row mt-2">
                        <div class="col">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenStarttext)}"
                                    escape="false" />
                            </p>
                        </div>
                    </h:panelGroup>
                    <h:outputText
                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenTextVorName)}#{eclLoginDatenM.titelVornameName}#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenTextNachName)}"
                        escape="false" />

                    <div class="row mt-2">
                        <div class="col">
                            <h:commandButton
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenJaButton)}"
                                action="#{tMitteilung.doPersonBestaetigenJa()}" styleClass="btn btn-outline-primary">
                                <f:ajax execute="@all" render="@form" onevent="nachAjaxButton" />
                            </h:commandButton>
                            <h:commandButton
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenNeinButton)}"
                                action="#{tMitteilung.doPersonBestaetigenNein()}" styleClass="btn btn-outline-primary">
                                <f:ajax execute="@all" render="@form" onevent="nachAjaxButton" />
                            </h:commandButton>
                        </div>
                    </div>
                </h:panelGroup>

                <!-- mitteilungEingeben -->
                <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==4}">

                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungStarttext)}"
                        styleClass="row mt-2">
                        <div class="col">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungStarttext)}"
                                    escape="false" />
                            </p>
                        </div>
                    </h:panelGroup>

                    <!-- Fragensteller -->
                    <h:panelGroup rendered="#{tMitteilungSession.nameAbfragen>0}">
                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungNameAbfragen)}"
                            styleClass="row mt-2">
                            <div class="col">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungNameAbfragen)}"
                                        escape="false" />
                                </p>
                            </div>
                        </h:panelGroup>
                        <div class="row mt-2">
                            <div class="col">
                                <p>
                                    <h:inputText value="#{tMitteilungSession.nameEingabe}" maxlength="100" size="80"
                                        styleClass="form-control" />
                                </p>
                            </div>
                        </div>
                    </h:panelGroup>

                    <!-- Kontaktdaten -->
                    <h:panelGroup rendered="#{tMitteilungSession.kontaktdatenAbfragen>0}">
                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungKontaktAbfragen)}"
                            styleClass="row mt-2">
                            <div class="col">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungKontaktAbfragen)}"
                                        escape="false" />
                                </p>
                            </div>
                        </h:panelGroup>
                        <div class="row mt-2">
                            <div class="col">
                                <p>
                                    <h:inputText value="#{tMitteilungSession.kontaktdatenEingabe}" maxlength="100"
                                        size="80" styleClass="form-control" />
                                </p>
                            </div>
                        </div>
                    </h:panelGroup>

                    <!-- Kontaktdaten Telefon -->
                    <h:panelGroup rendered="#{tMitteilungSession.kontaktdatenTelefonAbfragen>0}">
                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungKontaktTelefonAbfragen)}"
                            styleClass="row mt-2">
                            <div class="col">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungKontaktTelefonAbfragen)}"
                                        escape="false" />
                                </p>
                            </div>
                        </h:panelGroup>
                        <div class="row mt-2">
                            <div class="col">
                                <p>
                                    <h:inputText value="#{tMitteilungSession.kontaktdatenTelefonEingabe}"
                                        maxlength="100" size="80" styleClass="form-control" />
                                </p>
                            </div>
                        </div>
                    </h:panelGroup>

                    <!-- Bestätigungshinweis gelesen -->
                    <h:panelGroup rendered="#{tMitteilungSession.hinweisGelesen>0}">
                        <div class="row mt-2">
                            <div class="col">
                                <h:selectBooleanCheckbox id="id7" value="#{tMitteilungSession.hinweisBestaetigt}"
                                    onchange="checkboxUpload(this)" styleClass="form-check-input">
                                </h:selectBooleanCheckbox>
                                <h:outputLabel
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungHinweisGelesen)}"
                                    escape="false" styleClass="form-check-laqbel" for="id7"></h:outputLabel>
                            </div>
                        </div>
                    </h:panelGroup>

                    <!-- zu TOP-Auswahl -->
                    <h:panelGroup rendered="#{tMitteilungSession.topListeAnbieten>0}">
                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrVorTOPAuswahl)}"
                            styleClass="row mt-2">
                            <div class="col">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrVorTOPAuswahl)}"
                                        escape="false" />
                                </p>
                            </div>
                        </h:panelGroup>

                        <ui:repeat value="#{eclAbstimmungenListeM.abstimmungenListeM}" var="abstimmung"
                            id="schleifeMitteilung">
                            <div class="row mt-2">
                                <div class="col-3">
                                    <div class="row">
                                        <div class="col-3">
                                            <h:panelGroup rendered="#{abstimmung.nummerUnterdruecken==false}">
                                                <h:outputText value="#{abstimmung.nummer}"
                                                    rendered="#{tLanguage.lang ==1}" />
                                                <h:outputText value="#{abstimmung.nummerEN}"
                                                    rendered="#{tLanguage.lang ==2}" />
                                            </h:panelGroup>
                                            <span></span>
                                            <h:outputText value="#{abstimmung.nummerindex}"
                                                rendered="#{tLanguage.lang == 1}" />
                                            <h:outputText value="#{abstimmung.nummerindexEN}"
                                                rendered="#{tLanguage.lang == 2}" />
                                        </div>
                                        <div class="col-9">
                                            <h:outputText value="#{abstimmung.anzeigeBezeichnungLang}"
                                                rendered="#{tLanguage.lang == 1}" escape="false" />
                                            <h:outputText value="#{abstimmung.anzeigeBezeichnungLangEN}"
                                                rendered="#{tLanguage.lang == 2}" escape="false" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-9">
                                    <h:selectBooleanCheckbox id="id7" value="#{abstimmung.markiert}"
                                        rendered="#{!abstimmung.ueberschrift}" styleClass="form-check-input">
                                    </h:selectBooleanCheckbox>
                                </div>
                            </div>
                        </ui:repeat>

                        <ui:repeat value="#{eclAbstimmungenListeM.gegenantraegeListeM}" var="abstimmung"
                            id="schleifeMitteilungGegen">
                            <div class="row mt-2">
                                <div class="col-3">
                                    <div class="row">
                                        <div class="col-3">
                                            <h:panelGroup rendered="#{abstimmung.nummerUnterdruecken==false}">
                                                <h:outputText value="#{abstimmung.nummer}"
                                                    rendered="#{tLanguage.lang ==1}" />
                                                <h:outputText value="#{abstimmung.nummerEN}"
                                                    rendered="#{tLanguage.lang ==2}" />
                                            </h:panelGroup>
                                            <span></span>
                                            <h:outputText value="#{abstimmung.nummerindex}"
                                                rendered="#{tLanguage.lang == 1}" />
                                            <h:outputText value="#{abstimmung.nummerindexEN}"
                                                rendered="#{tLanguage.lang == 2}" />
                                        </div>
                                        <div class="col-9">
                                            <h:outputText value="#{abstimmung.anzeigeBezeichnungLang}"
                                                rendered="#{tLanguage.lang == 1}" escape="false" />
                                            <h:outputText value="#{abstimmung.anzeigeBezeichnungLangEN}"
                                                rendered="#{tLanguage.lang == 2}" escape="false" />
                                        </div>
                                    </div>
                                </div>
                                <div class="col-9">
                                    <div class="abstimmungs-btn-jne">
                                        <h:selectBooleanCheckbox id="id7" value="#{abstimmung.markiert}"
                                            rendered="#{!abstimmung.ueberschrift}" styleClass="form-check-input">
                                        </h:selectBooleanCheckbox>
                                    </div>
                                </div>
                            </div>
                        </ui:repeat>

                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrNachTOPAuswahl)}"
                            styleClass="row mt-2">
                            <div class="col">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrNachTOPAuswahl)}"
                                        escape="false" />
                                </p>
                            </div>
                        </h:panelGroup>

                    </h:panelGroup>

                    <!-- zu Inhalts-Hinweise -->
                    <h:panelGroup rendered="#{tMitteilungSession.inhaltsHinweiseAnbieten}">
                        <h:panelGroup rendered="#{tMitteilungSession.inhaltsHinweiseVorhandenundAktiv}">
                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrVorInhaltsHinweise)}"
                                styleClass="row mt-2">
                                <div class="col">
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrVorInhaltsHinweise)}"
                                            escape="false" />
                                    </p>
                                </div>
                            </h:panelGroup>

                            <ui:repeat value="#{tMitteilungSession.inhaltsHinweiseListe}" var="inhaltsHinweis"
                                id="schleifeInhaltsHinweisMitteilung">
                                <div class="row mt-2">
                                    <div class="col">
                                        <h:selectBooleanCheckbox id="id8" value="#{inhaltsHinweis.selektiert}"
                                            styleClass="form-check-input">
                                        </h:selectBooleanCheckbox>
                                        <h:outputText value="#{inhaltsHinweis.textDE}" rendered="#{tLanguage.lang == 1}"
                                            escape="false" styleClass="form-check-label" for="id8" />
                                        <h:outputText value="#{inhaltsHinweis.textEN}" rendered="#{tLanguage.lang == 2}"
                                            escape="false" styleClass="form-check-label" for="id8" />
                                    </div>
                                </div>
                            </ui:repeat>

                        </h:panelGroup>
                    </h:panelGroup>

                    <!-- Kurztext -->
                    <h:panelGroup rendered="#{tMitteilungSession.kurztextAbfragen>0}">
                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungVorKurzText)}"
                            styleClass="row mt-2">
                            <div class="col">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungVorKurzText)}"
                                        escape="false" />
                                </p>
                            </div>
                        </h:panelGroup>
                        <div class="row mt-2">
                            <div class="col">
                                <p>
                                    <h:inputText value="#{tMitteilungSession.kurzTextEingabe}" maxlength="100" size="80"
                                        styleClass="form-control" />
                                </p>
                            </div>
                        </div>
                    </h:panelGroup>

                    <!-- Auswahl anzeigen -->
                    <h:panelGroup rendered="#{tMitteilungSession.liefereAuswahlLangtextOderDateiAnzeigen()}">
                        <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden('1957')}" styleClass="row mt-2">
                            <div class="col">
                                <p>
                                    <h:outputText value="#{eclPortalTexteM.holeText('1957')}" escape="false" />
                                </p>
                            </div>
                        </h:panelGroup>
                        <div class="row mt-2">
                            <div class="col">
                                <h:selectOneRadio id="auswahlAbschicken"
                                    value="#{tMitteilungSession.auswahlLangtextOderDatei}" layout="pageDirection"
                                    styleClass="radio-buttons">
                                    <f:selectItem itemLabel="#{eclPortalTexteM.holeText('1958')}" itemValue="1" />
                                    <f:selectItem itemLabel="#{eclPortalTexteM.holeText('1959')}" itemValue="2" />
                                    <f:ajax render="eingabebereich" />
                                </h:selectOneRadio>
                            </div>
                        </div>
                    </h:panelGroup>

                    <h:panelGroup id="eingabebereich">
                        <!-- Langtext -->
                        <h:panelGroup
                            rendered="#{tMitteilungSession.langtextAbfragen>0 and (tMitteilungSession.auswahlLangtextOderDatei==1 or tMitteilungSession.liefereAuswahlLangtextOderDateiAnzeigen()==false)}">
                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungVorLangText)}"
                                styleClass="row mt-2">
                                <div class="col">
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungVorLangText)}"
                                            escape="false" />
                                    </p>
                                </div>
                            </h:panelGroup>
                            <p>
                                <h:inputTextarea value="#{tMitteilungSession.langTextEingabe}" counter="display"
                                    rows="5" cols="70" pt:maxlength="#{tMitteilungSession.laenge}"
                                    onkeyup="setVerbleibendeZeichen(event);" styleClass="form-control">
                                </h:inputTextarea>
                                <br />
                                <span id="span-verbleibende-Zeichen">0</span> /
                                <h:outputText value="#{tMitteilungSession.laenge}" escape="false" />
                            </p>
                        </h:panelGroup>

                        <!-- Datei (Text oder Video) hochladen -->
                        <h:panelGroup
                            rendered="#{tMitteilungSession.dateiHochladenMoeglich and (tMitteilungSession.auswahlLangtextOderDatei==2 or tMitteilungSession.liefereAuswahlLangtextOderDateiAnzeigen()==false)}">
                            <!-- Einleitungstext für Hochladen -->
                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrStarttextHochladenBereich)}"
                                styleClass="row mt-2">
                                <div class="col">
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrStarttextHochladenBereich)}"
                                            escape="false" />
                                    </p>
                                </div>
                            </h:panelGroup>

                            <div id="fileUploadVorAuswahl">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrNochKeineDateiAusgewaehltHochladenBereich)}"
                                        escape="false" />
                                </p>
                            </div>

                            <!-- ##########################################################################
                                    #############################################################################
                                     Upload Start -->


                            <!-- Filesize input -->
                            <div class="resumable-error error">#{eclPortalTexteM.getFehlertext('-100166')}</div>
                            <div class="resumable-drop">
                                #{eclPortalTexteM.holeText('1930')}
                                <a class="resumable-browse">
                                    <u>#{eclPortalTexteM.holeText('1931')}</u>
                                </a>
                            </div>

                            <ul class="resumable-list"></ul>

                            <script>
                                var fileTypes = "#{tMitteilungSession.erlaubteUploadFormateKomplettJS}";
                                var fileTypesArray = fileTypes
                                    .split(',');
                                var fileSizeMax = "#{tMitteilungSession.videoLaenge}";
                                fileSizeMax = fileSizeMax * 1024 * 1024;
                                var fileAnzahlMax = 1;
                                var fehlerZuVieleDateien = "#{eclPortalTexteM.getFehlertext('-100165')}";
                                var fehlerDateiZuGross = "#{eclPortalTexteM.getFehlertext('-100159')}";
                                var fehlerFalscherDateityp = "#{eclPortalTexteM.getFehlertext('-100161')}";
                                loadUpload();
                            </script>

                            <!--<h:commandButton id="btnUploadTest" action="#{tMitteilung.testUpload()}" style="display: none;">
                                    <f:ajax execute="@all" render="@form" onevent="nachAjaxButtonCheckFileUpload" />
                                </h:commandButton>-->

                            <!-- ##########################################################################
                                    #############################################################################
                                     Upload Ende -->


                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrEndetextHochladenBereich)}"
                                styleClass="row mt-2">
                                <div class="col">
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrEndetextHochladenBereich)}"
                                            escape="false" />
                                    </p>
                                </div>
                            </h:panelGroup>


                            <!-- Was halt sonst noch so gebraucht wird ??????????????????????????????????????????????????????????????????????? -->
                        </h:panelGroup>

                        <!-- Button abschicken -->
                        <h:panelGroup rendered="#{tMitteilungSession.liefereButtonAbschickenAnzeigen()==true}">
                            <div class="row mt-2">
                                <div class="col">
                                    <h:commandButton id="btnMitteilungAbschickenVideoNormal"
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungButtonAbschicken)}"
                                        action="#{tMitteilung.doMitteilungAbschickenButton()}"
                                        styleClass="btn btn-outline-primary"
                                        rendered="#{tMitteilungSession.dateiHochladenMoeglich}">
                                        <f:ajax execute=" @all " render="@form "
                                            onevent="function(data) {nachAjaxButton(data, 'true', 'false', 'mainInhaltModal', null, 'true')}" />
                                    </h:commandButton>
                                    <h:commandButton id="btnMitteilungAbschicken"
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungButtonAbschicken)}"
                                        action="#{tMitteilung.doMitteilungAbschickenButton()}"
                                        styleClass="btn btn-outline-primary"
                                        rendered="#{not tMitteilungSession.dateiHochladenMoeglich}">
                                        <f:ajax execute=" @all " render="@form "
                                            onevent="function(data) {nachAjaxButton(data, 'true', 'true', 'mainInhaltModal', 'mainInhaltModal', 'true')}" />
                                    </h:commandButton>
                                </div>
                            </div>
                        </h:panelGroup>
                        <!-- HiddenButton - immer anzeigen wird auch aus Javascript heraus aufgerufen-->
                        <div style="display:none">
                            <h:commandButton id="btnMitteilungAbschickenVideo"
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungButtonAbschicken)}"
                                action="#{tMitteilung.doMitteilungAbschickenUpload()}"
                                styleClass="btn btn-outline-primary"
                                rendered="#{tMitteilungSession.dateiHochladenMoeglich}">
                                <f:ajax execute=" @all " render="@form "
                                    onevent="function(data) {nachAjaxButtonCheckFileUpload(data, 'true', 'false', 'mainInhaltModal', null, 'true')}" />
                            </h:commandButton>
                        </div>

                    </h:panelGroup>
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungEndetext)}"
                        styleClass="row mt-2">
                        <div class="col">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungEndetext)}"
                                    escape="false" />
                            </p>
                        </div>
                    </h:panelGroup>


                </h:panelGroup>
            </h:panelGroup>

            <!-- mitteilungNichtMoeglichDaPersonNichtBestaetigt -->
            <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==5}">
                <h:panelGroup
                    rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrPersonNichtBestaetigt)}"
                    styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonNichtBestaetigt)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
            </h:panelGroup>


            <!-- keineWeiterenMitteilungenMoeglich -->
            <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==6}">
                <h:panelGroup
                    rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrKeineWeiterenMitteilungen)}"
                    styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrKeineWeiterenMitteilungen)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
            </h:panelGroup>

            <!-- personenArtNichtZulaessig -->
            <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==7}">
                <h:panelGroup rendered="#{tMitteilungSession.juristischePersonNichtZulaessig}" styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrJuristischePersonNichtZulaessig)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
                <h:panelGroup rendered="#{tMitteilungSession.personengemeinschaftNichtZulaessig}" styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonengemeinschaftNichtZulaessig)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
            </h:panelGroup>

            <!-- Endetext (immer) -->
            <h:panelGroup rendered="#{tMitteilungSession.funktionIstAktiv}">
                <!-- Fragenstellung ist gerade aktiv -->
                <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrEndetextAktiv)}"
                    styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrEndetextAktiv)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
            </h:panelGroup>

            <!-- === Upload-Modal === -->
            <f:subview id="idUploadModal">
                <ui:include src="/WEB-INF/stdportal/idetail/idUploadModal.xhtml" />
            </f:subview>

            <h:inputHidden id="uploadFilenameOriginalHidden"
                value="#{tMitteilungSession.uploadFilenameOriginalHidden}" />
            <h:inputHidden id="uploadFilenameInternHidden" value="#{tMitteilungSession.uploadFilenameInternHidden}" />
            <h:inputHidden id="uploadFilesizeHidden" value="#{tMitteilungSession.uploadFilesizeHidden}" />
            <h:inputHidden id="uploadFileErrorHidden" value="#{tMitteilungSession.uploadFileErrorHidden}" />





            <!--+++++++++++++++++++++ gestellte Mitteilungen anzeigen+++++++++++++++++++++++++ -->
            <h:panelGroup
                rendered="#{(tMitteilungSession.anzuzeigenderBereich==1 or tMitteilungSession.anzuzeigenderBereich==6) and tMitteilungSession.anzahlMitteilungenGestellt>0}">
                <!-- Starttext -->
                <h:panelGroup
                    rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrListeMitteilungenStarttext)}"
                    styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeMitteilungenStarttext)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>

                <h:panelGroup rendered="#{tMitteilungSession.artDerMitteilung==3}">
                    <h:panelGroup rendered="#{tMitteilungSession.anzahlMitteilungenGestelltOhneZurueckgezogen>0}">

                        <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden('2095')}" styleClass="row mt-2">
                            <div class="col">
                                <p>
                                    <h:outputText value="#{eclPortalTexteM.holeText('2095')}" escape="false" />
                                </p>
                            </div>
                        </h:panelGroup>
                        <div class="row mt-2">
                            <div class="col">
                                <h:commandButton value="#{eclPortalTexteM.holeText('2096')}"
                                    action="#{tMitteilung.doKonferenzStatusAktualisieren()}"
                                    styleClass="btn btn-outline-primary">
                                    <f:ajax execute="@all" render="@form"
                                        onevent="function(data) {nachAjaxButton(data, 'true', 'true', 'mainInhaltModal', 'mainInhaltModal', 'true')}" />
                                </h:commandButton>
                            </div>
                        </div>
                    </h:panelGroup>
                </h:panelGroup>

                <div class="rowList mt-5">
                    <ui:repeat value="#{tMitteilungSession.mitteilungenGestelltListe}" var="mitteilung">
                        <div class="row mt-2">
                            <div class="col-lg-8 col-12">
                                <p>
                                    <h:panelGroup rendered="#{mitteilung.nameVornameOrt!=''}">
                                        <h:outputText value="#{mitteilung.nameVornameOrt}" escape="true" />
                                        <br />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{mitteilung.kontaktDaten!=''}">
                                        <h:outputText value="#{mitteilung.kontaktDaten}" escape="true" />
                                        <br />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{mitteilung.kontaktDatenTelefon!=''}">
                                        <h:outputText value="#{mitteilung.kontaktDatenTelefon}" escape="true" />
                                        <br />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{mitteilung.zuTOPListe!=''}">
                                        <h:outputText value="#{eclPortalTexteM.holeText('1889')}" escape="false" />
                                        <h:outputText value="#{mitteilung.zuTOPListe}" escape="true" />
                                        <br />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{mitteilung.inhaltsHinweiseVorhandenundAktiv}">
                                        <ui:repeat value="#{mitteilung.inhaltsHinweiseListe}" var="inhaltsHinweis">
                                            <h:outputText value="#{inhaltsHinweis.textDE}"
                                                rendered="#{tLanguage.lang == 1}" escape="true" />
                                            <h:outputText value="#{inhaltsHinweis.textEN}"
                                                rendered="#{tLanguage.lang == 2}" escape="true" />
                                            <br />
                                        </ui:repeat>
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{mitteilung.mitteilungKurztext!=''}">
                                        <h:outputText value="#{mitteilung.mitteilungKurztext}" escape="true" />
                                        <br />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{mitteilung.mitteilungLangtext!=''}">
                                        <h:outputText value="#{mitteilung.mitteilungLangtext}" escape="true" />
                                        <br />
                                    </h:panelGroup>
                                    <h:panelGroup rendered="#{mitteilung.dateiname!=''}">
                                        <h:outputText value="#{mitteilung.dateiname}" escape="true" />
                                        <br />
                                    </h:panelGroup>
                                </p>
                            </div>
                            <div class="col-lg-4 col-12 text-end">
                                <!--  and tMitteilungSession.funktionIstAktiv -->
                                <h:commandButton
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeMitteilungenButtonZurueckziehen)}"
                                    action="#{tMitteilung.doZurueckziehenMitteilung(mitteilung)}" styleClass="btn btn-danger w-100"
                                    rendered="#{mitteilung.zurueckziehenMoeglich() and tMitteilungSession.zurueckziehenMoeglich==1}">
                                    <f:ajax execute="@all" render="@form"
                                        onevent="function(data) {nachAjaxButton(data, 'true', 'true', 'mainInhaltModal', 'mainInhaltModal', 'true')}" />
                                </h:commandButton>
                                <p>
                                    <h:outputText value="#{eclPortalTexteM.holeText(mitteilung.liefereStatusText())}"
                                        escape="false" />
                                </p>
                            </div>
                        </div>
                    </ui:repeat>
                </div>
                <!-- EndText -->
                <h:panelGroup
                    rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrListeMitteilungenEndetext)}"
                    styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeMitteilungenEndetext)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
            </h:panelGroup>

            <!--+++++++++++++++++++++ Rednerliste anzeigen+++++++++++++++++++++++++ -->
            <h:panelGroup
                rendered="#{(tMitteilungSession.anzuzeigenderBereich==1 or tMitteilungSession.anzuzeigenderBereich==6) and tMitteilungSession.listeAnzeigen>0}">
                <!-- Starttext -->
                <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrListeStarttext)}"
                    styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeStarttext)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
                <div class="row mt-2">
                    <div class="col">
                        <h:commandButton
                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeButtonAktualisieren)}"
                            action="#{tMitteilung.doAktualisierenRednerListe}" styleClass="btn btn-outline-primary">
                            <f:ajax execute="@all" render="@form"
                                onevent="function(data) {nachAjaxButton(data, 'true', 'true', 'mainInhaltModal', 'mainInhaltModal', 'true')}" />
                        </h:commandButton>
                    </div>
                </div>

                <div class="rowList mt-5">
                    <ui:repeat value="#{tMitteilungSession.rednerListe}" var="redner">
                        <div class="row mt-2">
                            <div class="col">
                                <p>
                                    <h:outputText value="#{redner.nameVornameOrt}" escape="false" />
                                </p>
                            </div>
                        </div>
                    </ui:repeat>
                </div>



                <!-- EndText -->
                <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrListeEndetext)}"
                    styleClass="row mt-2">
                    <div class="col">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeEndetext)}"
                                escape="false" />
                        </p>
                    </div>
                </h:panelGroup>
            </h:panelGroup>

        </div>
    </div>

    <h:panelGroup rendered="#{tMitteilungSession.connectToWebSocket}">
        <script>
            openWebSocket(1);
        </script>
    </h:panelGroup>

    <f:subview id="iFragenButtonsUnten">
        <ui:include src="idetail/idSeiteButtonsUntenModals.xhtml ">
            <ui:param name="modalShowBtnRight" value="false" />
            <ui:param name="modalStaticBtnRight" value="false" />
            <ui:param name="modalShowBtnLeft" value="false" />
            <ui:param name="modalStaticBtnLeft" value="false" />
        </ui:include>
    </f:subview>

</ui:composition>