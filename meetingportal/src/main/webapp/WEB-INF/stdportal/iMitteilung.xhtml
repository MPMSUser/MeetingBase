<!--

     Copyright 2025 Better Orange IR & HV AG

     Licensed under the Meetingbase License (the "License");
     Vou may not use this file except in compliance with the License.
     You may obtain a copy of the License in the root directory (MEETINGBASE_LICENSE).

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.

-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="jakarta.faces.facelets" xmlns:f="jakarta.faces.core"
    xmlns:h="jakarta.faces.html" xmlns:pt="jakarta.faces.passthrough" xmlns:c="jakarta.tags.core" lang="de">

    <f:subview id="iMitteilungOben">
        <ui:include src="idetail/idSeiteStart.xhtml" />
    </f:subview>

    <!-- ++++++++++++++++++++++Websocket+++++++++++++++++++++++ -->

    <script>
        jwtWsTokenMitteilungen = '#{tSession.jwtWsToken}';
    </script>

    <div class="container-80">
        <div class="row">
            <div class="col-8">
                <!-- ++++++++++++++++++++++Mitteilung eingeben+++++++++++++++++++++++ -->
                <!-- Starttext (Mitteilungstellung ist gerade aktiv) -->
                <h:panelGroup rendered="#{tMitteilungSession.funktionIstAktiv}">
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrStarttextAktiv)}">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrStarttextAktiv)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                </h:panelGroup>

                <!-- Starttext (Mitteilungstellung ist gerade inaktiv) -->
                <h:panelGroup rendered="#{!tMitteilungSession.funktionIstAktiv}">
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrStarttextInaktiv)}">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrStarttextInaktiv)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                </h:panelGroup>

                <!-- Mitteilung ist gerade aktiv -->
                <h:panelGroup rendered="#{tMitteilungSession.funktionIstAktiv}">

                    <!-- ausgangsView -->
                    <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==1}">

                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrAusgangsViewStarttext)}">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrAusgangsViewStarttext)}"
                                    escape="false" />
                            </p>
                        </h:panelGroup>
                        <p>
                            <h:commandButton
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrAusgangsViewButtonStart)}"
                                id="buttonMitteilungStart" action="#{tMitteilung.doMitteilungStart()}"
                                styleClass="btn-typ-00">
                                <f:ajax execute="@all" render="@form" onevent="nachAjaxButton" />
                            </h:commandButton>
                        </p>
                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrAusgangsViewEndetext)}">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrAusgangsViewEndetext)}"
                                    escape="false" />
                            </p>
                        </h:panelGroup>

                        <!-- bei Wortmeldungen: ggf. Videokonferenz-Refresh-Button anzeigen -->
                        <!-- ??????????????????????????????????????????????????????Videokonferenz???????????????????????????????????????????? -->
                        <h:panelGroup rendered="#{tMitteilungSession.artDerMitteilung==3}">
                            <h:panelGroup rendered="#{eclParamM.liefereWortmeldungenAlsVideokonferenz()}">

                                <!-- Bedingung könnte noch verbessert werden, bzw. zusätzliche Punkte abgefragt werden ??????? -->
                                <h:panelGroup
                                    rendered="#{tMitteilungSession.anzahlMitteilungenGestelltOhneZurueckgezogen>0}">


                                    <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzInTestraumKommen()}">
                                        <script>
                                            showModal('socket-modal-wortmeldung-ts');
                                        </script>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzTestraumVerlassen()}">
                                        <script>
                                            showModal('socket-modal-wortmeldung-tv');
                                        </script>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzInRederaumKommen()}">
                                        <script>
                                            showModal('socket-modal-wortmeldung-rs');
                                        </script>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzRederaumVerlassen()}">
                                        <script>
                                            showModal('socket-modal-wortmeldung-rv');
                                        </script>
                                    </h:panelGroup>

                                    <h:panelGroup rendered="#{tMitteilungSession.liefereKonferenzInRederaumSprechen()}">
                                        <script>
                                            showModal('socket-modal-wortmeldung-sp');
                                        </script>
                                    </h:panelGroup>

                                    <!-- Bereich für Informationen, die nur ein Teilnehmer einsehen kann, der eine Wortmeldung abgegeben hat -->

                                    <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden('2093')}">
                                        <p>
                                            <h:outputText value="#{eclPortalTexteM.holeText('2093')}" escape="false" />
                                        </p>
                                        <!--
                                        <p>
                                            <h:commandButton rendered="#{tLanguage.lang ==1}" value="#{eclPortalTexteM.holeText('2094')}" action="#{tMitteilung.doWortmeldungInfoAnzeigenDE()}" styleClass="btn-typ-00"
                                                onclick="this.form.target='_blank'"></h:commandButton>
                                            <h:commandButton rendered="#{tLanguage.lang ==2}" value="#{eclPortalTexteM.holeText('2094')}" action="#{tMitteilung.doWortmeldungInfoAnzeigenEN()}" styleClass="btn-typ-00"
                                                onclick="this.form.target='_blank'"></h:commandButton>
                                        </p>
                                        -->
                                    </h:panelGroup>


                                </h:panelGroup>


                            </h:panelGroup>

                        </h:panelGroup>
                    </h:panelGroup>


                    <!-- personBestaetigen -->
                    <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==3}">
                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrPersonBestaetigenStarttext)}">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenStarttext)}"
                                    escape="false" />
                            </p>
                        </h:panelGroup>
                        <h:outputText
                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenTextVorName)}#{eclLoginDatenM.titelVornameName}#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenTextNachName)}"
                            escape="false" />
                        <p>
                            <h:commandButton
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenJaButton)}"
                                action="#{tMitteilung.doPersonBestaetigenJa()}" styleClass="btn-typ-00">
                                <f:ajax execute="@all" render="@form" onevent="nachAjaxButton" />
                            </h:commandButton>
                            <h:commandButton
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonBestaetigenNeinButton)}"
                                action="#{tMitteilung.doPersonBestaetigenNein()}" styleClass="btn-typ-00">
                                <f:ajax execute="@all" render="@form" onevent="nachAjaxButton" />
                            </h:commandButton>
                        </p>
                    </h:panelGroup>

                    <!-- mitteilungEingeben -->
                    <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==4}">

                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungStarttext)}">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungStarttext)}"
                                    escape="false" />
                            </p>
                        </h:panelGroup>

                        <!-- Fragensteller -->
                        <h:panelGroup rendered="#{tMitteilungSession.nameAbfragen>0}">
                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungNameAbfragen)}">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungNameAbfragen)}"
                                        escape="false" />
                                </p>
                            </h:panelGroup>
                            <p>
                                <h:inputText value="#{tMitteilungSession.nameEingabe}" maxlength="100" size="80"
                                    autocomplete="off" />
                            </p>
                        </h:panelGroup>

                        <!-- Kontaktdaten -->
                        <h:panelGroup rendered="#{tMitteilungSession.kontaktdatenAbfragen>0}">
                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungKontaktAbfragen)}">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungKontaktAbfragen)}"
                                        escape="false" />
                                </p>
                            </h:panelGroup>
                            <p>
                                <h:inputText value="#{tMitteilungSession.kontaktdatenEingabe}" maxlength="100" size="80"
                                    autocomplete="off" />
                            </p>
                        </h:panelGroup>

                        <!-- Kontaktdaten Telefon -->
                        <h:panelGroup rendered="#{tMitteilungSession.kontaktdatenTelefonAbfragen>0}">
                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungKontaktTelefonAbfragen)}">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungKontaktTelefonAbfragen)}"
                                        escape="false" />
                                </p>
                            </h:panelGroup>
                            <p>
                                <h:inputText value="#{tMitteilungSession.kontaktdatenTelefonEingabe}" maxlength="100"
                                    size="80" autocomplete="off" />
                            </p>
                        </h:panelGroup>

                        <!-- Bestätigungshinweis gelesen -->
                        <h:panelGroup rendered="#{tMitteilungSession.hinweisGelesen>0}">
                            <h:panelGrid columns="2">
                                <h:selectBooleanCheckbox id="id7" value="#{tMitteilungSession.hinweisBestaetigt}">
                                </h:selectBooleanCheckbox>
                                <h:outputLabel
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungHinweisGelesen)}"
                                    escape="false" />
                            </h:panelGrid>

                        </h:panelGroup>

                        <!-- zu TOP-Auswahl -->
                        <h:panelGroup rendered="#{tMitteilungSession.topListeAnbieten>0}">
                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrVorTOPAuswahl)}">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrVorTOPAuswahl)}"
                                        escape="false" />
                                </p>
                            </h:panelGroup>

                            <ui:repeat value="#{eclAbstimmungenListeM.abstimmungenListeM}" var="abstimmung"
                                id="schleifeMitteilung">
                                <div class="row">
                                    <div class="col-3">
                                        <div class="col-1">
                                            <h:panelGroup rendered="#{abstimmung.nummerUnterdruecken==false}">
                                                <h:outputText value="#{abstimmung.nummer}"
                                                    rendered="#{tLanguage.lang ==1}" />
                                                <h:outputText value="#{abstimmung.nummerEN}"
                                                    rendered="#{tLanguage.lang ==2}" />
                                            </h:panelGroup>
                                            <span>
                                            </span>
                                            <h:outputText value="#{abstimmung.nummerindex}"
                                                rendered="#{tLanguage.lang == 1}" />
                                            <h:outputText value="#{abstimmung.nummerindexEN}"
                                                rendered="#{tLanguage.lang == 2}" />
                                        </div>
                                        <div class="col-2">
                                            <h:outputText value="#{abstimmung.anzeigeBezeichnungLang}"
                                                rendered="#{tLanguage.lang == 1}" escape="false" />
                                            <h:outputText value="#{abstimmung.anzeigeBezeichnungLangEN}"
                                                rendered="#{tLanguage.lang == 2}" escape="false" />
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="abstimmungs-btn-jne">
                                            <h:selectBooleanCheckbox id="id7" value="#{abstimmung.markiert}"
                                                rendered="#{!abstimmung.ueberschrift}">
                                            </h:selectBooleanCheckbox>
                                        </div>
                                    </div>
                                </div>
                            </ui:repeat>

                            <ui:repeat value="#{eclAbstimmungenListeM.gegenantraegeListeM}" var="abstimmung"
                                id="schleifeMitteilungGegen">
                                <div class="row">
                                    <div class="col-3">
                                        <div class="col-1">
                                            <h:panelGroup rendered="#{abstimmung.nummerUnterdruecken==false}">
                                                <h:outputText value="#{abstimmung.nummer}"
                                                    rendered="#{tLanguage.lang ==1}" />
                                                <h:outputText value="#{abstimmung.nummerEN}"
                                                    rendered="#{tLanguage.lang ==2}" />
                                            </h:panelGroup>
                                            <span>
                                            </span>
                                            <h:outputText value="#{abstimmung.nummerindex}"
                                                rendered="#{tLanguage.lang == 1}" />
                                            <h:outputText value="#{abstimmung.nummerindexEN}"
                                                rendered="#{tLanguage.lang == 2}" />
                                        </div>
                                        <div class="col-2">
                                            <h:outputText value="#{abstimmung.anzeigeBezeichnungLang}"
                                                rendered="#{tLanguage.lang == 1}" escape="false" />
                                            <h:outputText value="#{abstimmung.anzeigeBezeichnungLangEN}"
                                                rendered="#{tLanguage.lang == 2}" escape="false" />
                                        </div>
                                    </div>
                                    <div class="col-3">
                                        <div class="abstimmungs-btn-jne">
                                            <h:selectBooleanCheckbox id="id7" value="#{abstimmung.markiert}"
                                                rendered="#{!abstimmung.ueberschrift}">
                                            </h:selectBooleanCheckbox>
                                        </div>
                                    </div>
                                </div>
                            </ui:repeat>

                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrNachTOPAuswahl)}">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrNachTOPAuswahl)}"
                                        escape="false" />
                                </p>
                            </h:panelGroup>

                        </h:panelGroup>

                        <!-- zu Inhalts-Hinweise -->
                        <h:panelGroup rendered="#{tMitteilungSession.inhaltsHinweiseAnbieten}">
                            <h:panelGroup rendered="#{tMitteilungSession.inhaltsHinweiseVorhandenundAktiv}">
                                <h:panelGroup
                                    rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrVorInhaltsHinweise)}">
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrVorInhaltsHinweise)}"
                                            escape="false" />
                                    </p>
                                </h:panelGroup>

                                <ui:repeat value="#{tMitteilungSession.inhaltsHinweiseListe}" var="inhaltsHinweis"
                                    id="schleifeInhaltsHinweisMitteilung">
                                    <h:panelGrid columns="2" styleClass="gridTop tableCheckbox">
                                        <!-- eclTeilnehmerLoginM.aktienregisterZusatzM.eMailRegistrierungAnzeige -->
                                        <h:selectBooleanCheckbox id="id8" value="#{inhaltsHinweis.selektiert}">
                                        </h:selectBooleanCheckbox>
                                        <h:panelGroup rendered="#{tLanguage.lang == 1}">
                                            <h:outputLabel value="#{inhaltsHinweis.textDE}" escape="false" />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{tLanguage.lang == 2}">
                                            <h:outputLabel value="#{inhaltsHinweis.textEN}" escape="false" />
                                        </h:panelGroup>
                                    </h:panelGrid>
                                </ui:repeat>

                            </h:panelGroup>
                        </h:panelGroup>

                        <!-- Kurztext -->
                        <h:panelGroup rendered="#{tMitteilungSession.kurztextAbfragen>0}">
                            <h:panelGroup
                                rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungVorKurzText)}">
                                <p>
                                    <h:outputText
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungVorKurzText)}"
                                        escape="false" />
                                </p>
                            </h:panelGroup>
                            <p>
                                <h:inputText value="#{tMitteilungSession.kurzTextEingabe}" maxlength="100" size="80"
                                    autocomplete="off" />
                            </p>
                        </h:panelGroup>

                        <!-- Auswahl anzeigen -->
                        <h:panelGroup rendered="#{tMitteilungSession.liefereAuswahlLangtextOderDateiAnzeigen()}">
                            <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden('1957')}">
                                <p>
                                    <h:outputText value="#{eclPortalTexteM.holeText('1957')}" escape="false" />
                                </p>
                            </h:panelGroup>
                            <div class="row">
                                <h:selectOneRadio id="auswahlAbschicken"
                                    value="#{tMitteilungSession.auswahlLangtextOderDatei}" layout="pageDirection">
                                    <f:selectItem itemLabel="#{eclPortalTexteM.holeText('1958')}" itemValue="1" />
                                    <f:selectItem itemLabel="#{eclPortalTexteM.holeText('1959')}" itemValue="2" />
                                    <f:ajax render="eingabebereich" />
                                </h:selectOneRadio>
                            </div>
                        </h:panelGroup>

                        <h:panelGroup id="eingabebereich">
                            <!-- Langtext -->
                            <h:panelGroup
                                rendered="#{tMitteilungSession.langtextAbfragen>0 and (tMitteilungSession.auswahlLangtextOderDatei==1 or tMitteilungSession.liefereAuswahlLangtextOderDateiAnzeigen()==false)}">
                                <h:panelGroup
                                    rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungVorLangText)}">
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungVorLangText)}"
                                            escape="false" />
                                    </p>
                                </h:panelGroup>
                                <p>
                                    <h:inputTextarea value="#{tMitteilungSession.langTextEingabe}" counter="display"
                                        rows="5" cols="70" pt:maxlength="#{tMitteilungSession.laenge}"
                                        onkeyup="setVerbleibendeZeichen(event);">
                                    </h:inputTextarea>
                                    <br />
                                    <span id="span-verbleibende-Zeichen">0</span> /
                                    <h:outputText value="#{tMitteilungSession.laenge}" escape="false" />
                                </p>
                            </h:panelGroup>

                            <!-- Datei (Text oder Video) hochladen -->
                            <h:panelGroup
                                rendered="#{tMitteilungSession.dateiHochladenMoeglich and (tMitteilungSession.auswahlLangtextOderDatei==2 or tMitteilungSession.liefereAuswahlLangtextOderDateiAnzeigen()==false)}">
                                <!-- Einleitungstext für Hochladen -->
                                <h:panelGroup
                                    rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrStarttextHochladenBereich)}">
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrStarttextHochladenBereich)}"
                                            escape="false" />
                                    </p>
                                </h:panelGroup>

                                <div id="fileUploadVorAuswahl">
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrNochKeineDateiAusgewaehltHochladenBereich)}"
                                            escape="false" />
                                    </p>
                                </div>

                                <!-- ##########################################################################
                                #############################################################################
                                 Upload Start -->


                                <!-- Filesize input -->
                                <div class="resumable-error error">#{eclPortalTexteM.getFehlertext('-100166')}</div>
                                <div class="resumable-drop">
                                    #{eclPortalTexteM.holeText('1930')}
                                    <a class="resumable-browse">
                                        <u>#{eclPortalTexteM.holeText('1931')}</u>
                                    </a>
                                </div>

                                <ul class="resumable-list">
                                </ul>

                                <script>
                                    var fileTypes = "#{tMitteilungSession.erlaubteUploadFormateKomplettJS}";
                                    var fileTypesArray = fileTypes
                                        .split(',');
                                    var fileSizeMax = "#{tMitteilungSession.videoLaenge}";
                                    fileSizeMax = fileSizeMax * 1024 * 1024;
                                    var fileAnzahlMax = 1;
                                    var fehlerZuVieleDateien = "#{eclPortalTexteM.getFehlertext('-100165')}";
                                    var fehlerDateiZuGross = "#{eclPortalTexteM.getFehlertext('-100159')}";
                                    var fehlerFalscherDateityp = "#{eclPortalTexteM.getFehlertext('-100161')}";
                                    loadUpload();
                                </script>

                                <!--<h:commandButton id="btnUploadTest" action="#{tMitteilung.testUpload()}" style="display: none;">
                                <f:ajax execute="@all" render="@form" onevent="nachAjaxButtonCheckFileUpload" />
                            </h:commandButton>-->

                                <!-- ##########################################################################
                                #############################################################################
                                 Upload Ende -->


                                <h:panelGroup
                                    rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrEndetextHochladenBereich)}">
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrEndetextHochladenBereich)}"
                                            escape="false" />
                                    </p>

                                </h:panelGroup>


                                <!-- Was halt sonst noch so gebraucht wird ??????????????????????????????????????????????????????????????????????? -->
                            </h:panelGroup>

                            <!-- Button abschicken -->
                            <h:panelGroup rendered="#{tMitteilungSession.liefereButtonAbschickenAnzeigen()==true}">
                                <p>
                                    <h:commandButton id="btnMitteilungAbschickenVideoNormal"
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungButtonAbschicken)}"
                                        action="#{tMitteilung.doMitteilungAbschickenButton()}" styleClass="btn-typ-00"
                                        rendered="#{tMitteilungSession.dateiHochladenMoeglich}">
                                        <f:ajax execute=" @all " render="@form " onevent="nachAjaxButton" />
                                    </h:commandButton>
                                    <h:commandButton id="btnMitteilungAbschicken"
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungButtonAbschicken)}"
                                        action="#{tMitteilung.doMitteilungAbschickenButton()}" styleClass="btn-typ-00"
                                        rendered="#{not tMitteilungSession.dateiHochladenMoeglich}">
                                        <f:ajax execute=" @all " render="@form " onevent="nachAjaxButtonMitteilung" />
                                    </h:commandButton>
                                </p>
                            </h:panelGroup>
                            <!-- HiddenButton - immer anzeigen wird auch aus Javascript heraus aufgerufen-->
                            <div style="display:none">
                                <h:commandButton id="btnMitteilungAbschickenVideo"
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungButtonAbschicken)}"
                                    action="#{tMitteilung.doMitteilungAbschickenUpload()}" styleClass="btn-typ-00"
                                    rendered="#{tMitteilungSession.dateiHochladenMoeglich}">
                                    <f:ajax execute=" @all " render="@form " onevent="nachAjaxButtonCheckFileUpload " />
                                </h:commandButton>
                            </div>

                        </h:panelGroup>
                        <h:panelGroup
                            rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrMitteilungEndetext)}">
                            <p>
                                <h:outputText
                                    value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrMitteilungEndetext)}"
                                    escape="false" />
                            </p>
                        </h:panelGroup>


                    </h:panelGroup>
                </h:panelGroup>

                <!-- mitteilungNichtMoeglichDaPersonNichtBestaetigt -->
                <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==5}">
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrPersonNichtBestaetigt)}">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonNichtBestaetigt)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                </h:panelGroup>


                <!-- keineWeiterenMitteilungenMoeglich -->
                <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==6}">
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrKeineWeiterenMitteilungen)}">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrKeineWeiterenMitteilungen)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                </h:panelGroup>

                <!-- personenArtNichtZulaessig -->
                <h:panelGroup rendered="#{tMitteilungSession.anzuzeigenderBereich==7}">
                    <h:panelGroup rendered="#{tMitteilungSession.juristischePersonNichtZulaessig}">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrJuristischePersonNichtZulaessig)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{tMitteilungSession.personengemeinschaftNichtZulaessig}">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrPersonengemeinschaftNichtZulaessig)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                </h:panelGroup>

                <!-- Endetext (immer) -->
                <h:panelGroup rendered="#{tMitteilungSession.funktionIstAktiv}">
                    <!-- Fragenstellung ist gerade aktiv -->
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrEndetextAktiv)}">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrEndetextAktiv)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                </h:panelGroup>


            </div>
        </div>
    </div>

    <!-- === Upload-Modal === -->
    <f:subview id="idUploadModal">
        <ui:include src="idetail/idUploadModal.xhtml" />
    </f:subview>

    <h:inputHidden id="uploadFilenameOriginalHidden" value="#{tMitteilungSession.uploadFilenameOriginalHidden}" />
    <h:inputHidden id="uploadFilenameInternHidden" value="#{tMitteilungSession.uploadFilenameInternHidden}" />
    <h:inputHidden id="uploadFilesizeHidden" value="#{tMitteilungSession.uploadFilesizeHidden}" />
    <h:inputHidden id="uploadFileErrorHidden" value="#{tMitteilungSession.uploadFileErrorHidden}" />

    <f:subview id="iFragenButtonsUnten">
        <ui:include src="idetail/idSeiteButtonsUnten.xhtml " />
    </f:subview>


    <div class="container-80 ">
        <div class="row ">
            <div class="col-8 ">


                <!--+++++++++++++++++++++ gestellte Mitteilungen anzeigen+++++++++++++++++++++++++ -->
                <h:panelGroup
                    rendered="#{(tMitteilungSession.anzuzeigenderBereich==1 or tMitteilungSession.anzuzeigenderBereich==6) and tMitteilungSession.anzahlMitteilungenGestellt>0}">
                    <!-- Starttext -->
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrListeMitteilungenStarttext)}">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeMitteilungenStarttext)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>

                    <h:panelGroup rendered="#{tMitteilungSession.artDerMitteilung==3}">
                        <h:panelGroup rendered="#{tMitteilungSession.anzahlMitteilungenGestelltOhneZurueckgezogen>0}">

                            <h:panelGroup rendered="#{eclPortalTexteM.pruefeTextVorhanden('2095')}">
                                <p>
                                    <h:outputText value="#{eclPortalTexteM.holeText('2095')}" escape="false" />
                                </p>
                            </h:panelGroup>
                            <p>
                                <h:commandButton value="#{eclPortalTexteM.holeText('2096')}"
                                    action="#{tMitteilung.doKonferenzStatusAktualisieren()}" styleClass="btn-typ-00">
                                    <f:ajax execute="@all" render="@form" onevent="nachAjaxButton" />
                                </h:commandButton>
                            </p>
                        </h:panelGroup>
                    </h:panelGroup>

                    <section id="gestellte-mitteilungen-bereich">
                        <ui:repeat value="#{tMitteilungSession.mitteilungenGestelltListe}" var="mitteilung">
                            <div class="row">
                                <div class="col-6">
                                    <p>
                                        <h:panelGroup rendered="#{mitteilung.nameVornameOrt!=''}">
                                            <h:outputText value="#{mitteilung.nameVornameOrt}" escape="true" />
                                            <br />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{mitteilung.kontaktDaten!=''}">
                                            <h:outputText value="#{mitteilung.kontaktDaten}" escape="true" />
                                            <br />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{mitteilung.kontaktDatenTelefon!=''}">
                                            <h:outputText value="#{mitteilung.kontaktDatenTelefon}" escape="true" />
                                            <br />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{mitteilung.zuTOPListe!=''}">
                                            <h:outputText value="#{eclPortalTexteM.holeText('1889')}" escape="false" />
                                            <h:outputText value="#{mitteilung.zuTOPListe}" escape="true" />
                                            <br />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{mitteilung.inhaltsHinweiseVorhandenundAktiv}">
                                            <ui:repeat value="#{mitteilung.inhaltsHinweiseListe}" var="inhaltsHinweis">
                                                <h:outputText value="#{inhaltsHinweis.textDE}"
                                                    rendered="#{tLanguage.lang == 1}" escape="true" />
                                                <h:outputText value="#{inhaltsHinweis.textEN}"
                                                    rendered="#{tLanguage.lang == 2}" escape="true" />
                                                <br />
                                            </ui:repeat>
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{mitteilung.mitteilungKurztext!=''}">
                                            <h:outputText value="#{mitteilung.mitteilungKurztext}" escape="true" />
                                            <br />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{mitteilung.mitteilungLangtext!=''}">
                                            <h:outputText value="#{mitteilung.mitteilungLangtext}" escape="true" />
                                            <br />
                                        </h:panelGroup>
                                        <h:panelGroup rendered="#{mitteilung.dateiname!=''}">
                                            <h:outputText value="#{mitteilung.dateiname}" escape="true" />
                                            <br />
                                        </h:panelGroup>
                                    </p>
                                </div>
                                <div class="col-2">
                                    <!--  and tMitteilungSession.funktionIstAktiv -->
                                    <h:commandButton
                                        value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeMitteilungenButtonZurueckziehen)}"
                                        action="#{tMitteilung.doZurueckziehenMitteilung(mitteilung)}" class="btn-typ-00"
                                        rendered="#{mitteilung.zurueckziehenMoeglich() and tMitteilungSession.zurueckziehenMoeglich==1}">
                                        <f:ajax execute="@all" render="@form" onevent="nachAjaxButton" />
                                    </h:commandButton>
                                    <p>
                                        <h:outputText
                                            value="#{eclPortalTexteM.holeText(mitteilung.liefereStatusText())}"
                                            escape="false" />
                                    </p>
                                </div>
                            </div>
                        </ui:repeat>
                    </section>
                    <!-- EndText -->
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrListeMitteilungenEndetext)}">
                        <p>
                            <h:outputText
                                value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeMitteilungenEndetext)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                </h:panelGroup>

                <!--+++++++++++++++++++++ Rednerliste anzeigen+++++++++++++++++++++++++ -->
                <h:panelGroup
                    rendered="#{(tMitteilungSession.anzuzeigenderBereich==1 or tMitteilungSession.anzuzeigenderBereich==6) and tMitteilungSession.listeAnzeigen>0}">
                    <!-- Starttext -->
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrListeStarttext)}">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeStarttext)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                    <p>
                        <h:commandButton
                            value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeButtonAktualisieren)}"
                            action="#{tMitteilung.doAktualisierenRednerListe}" styleClass="btn-typ-00">
                            <f:ajax execute="@all" render="@form" onevent="nachAjaxButton" />
                        </h:commandButton>
                    </p>


                    <section id="rednerliste-bereich">
                        <ui:repeat value="#{tMitteilungSession.rednerListe}" var="redner">
                            <div class="row">
                                <div class="col-6">
                                    <p>
                                        <h:outputText value="#{redner.nameVornameOrt}" escape="false" />
                                    </p>
                                </div>
                            </div>
                        </ui:repeat>
                    </section>


                    <!-- EndText -->
                    <h:panelGroup
                        rendered="#{eclPortalTexteM.pruefeTextVorhanden(tMitteilungSession.textNrListeEndetext)}">
                        <p>
                            <h:outputText value="#{eclPortalTexteM.holeText(tMitteilungSession.textNrListeEndetext)}"
                                escape="false" />
                        </p>
                    </h:panelGroup>
                </h:panelGroup>

                <c:if test="#{tMitteilungSession.connectToWebSocket and not empty tSession.jwtWsToken}">
                    <script>
                        openWebSocket(1);
                    </script>
                </c:if>


            </div>
        </div>
    </div>
</ui:composition>