<!--

     Copyright 2025 Better Orange IR & HV AG

     Licensed under the Meetingbase License (the "License");
     Vou may not use this file except in compliance with the License.
     You may obtain a copy of the License in the root directory (MEETINGBASE_LICENSE).

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.

-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="jakarta.faces.facelets" xmlns:f="jakarta.faces.core"
    xmlns:h="jakarta.faces.html" xmlns:p="http://primefaces.org/ui" lang="de" template="/WEB-INF/uTemplate.xhtml">

<!--     <ui:composition template="WEB-INF/uTemplate.xhtml"> --> 
        <ui:define name="content">
            <h:form>

                <!-- Titel -->
                <ui:include src="/WEB-INF/ULOGIN/#{uSession.aktuellesTemplate}">
                    <ui:param name="loginAnzeigen" value="1" />
                </ui:include>

                <!-- Überschrift und Fehlermeldung -->
                <ui:include src="/WEB-INF/ULOGIN/uIncUeberschriftMitMandant.xhtml">
                    <ui:param name="ueberschrift" value="#{uGastkarteSession.ueberschriftAendern}" />
                    <ui:param name="zurueck" value="1" />
                </ui:include>

                <div class="divArbeitsbereich">
                    <p:panelGrid columnClasses="panel25FirstColumn, panel25SecondColumn" columns="2"
                        style="width: 1180px">

                        <p:column>
                            <h:outputLabel value="Gastkarten-Nr"></h:outputLabel>
                        </p:column>
                        <p:column>
                            <h:outputLabel value="#{eclGastM.nummer}"></h:outputLabel>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.stornierenNrZulaessig}">
                            <h:commandButton value="GK-Nummer stornieren" styleClass="btnNeutral"
                                action="#{uGastkarte.doStornieren()}" />
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.stornierenNrZulaessig}">
                            <h:outputLabel value="" />
                        </p:column>

                        <p:column
                            rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0 and uGastkarteSession.stornierenNrZulaessig}">
                            <h:outputLabel value="Ausstellungsgrund Storno" />
                        </p:column>
                        <p:column
                            rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0 and uGastkarteSession.stornierenNrZulaessig}">
                            <h:selectOneMenu value="#{uGastkarteSession.neuerAusstellungsgrundStorno}">
                                <f:selectItems value="#{eclAusstellungsgrundListeM.ausstellungsgrundStornoListeM}"
                                    var="ausstellungsgrund" itemLabel="#{ausstellungsgrund.beschreibung}"
                                    itemValue="#{ausstellungsgrund.kuerzel}" />
                            </h:selectOneMenu>
                        </p:column>

                        <p:column
                            rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0 and uGastkarteSession.stornierenNrZulaessig}">
                            <h:outputLabel value="Ausstellungsgrund Storno - Kommentar" />
                        </p:column>
                        <p:column
                            rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0 and uGastkarteSession.stornierenNrZulaessig}">
                            <h:inputText value="#{uGastkarteSession.neuerAusstellungsgrundStornoKommentar}"
                                maxlength="80" size="82"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.neueNrZulaessig}">
                            <h:commandButton value="neue GK-Nummer vergeben" styleClass="btnNeutral"
                                action="#{uGastkarte.doNeueNrVergeben()}" />
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.neueNrZulaessig}">
                            <h:commandButton value="neue GK-Nummer vergeben und Sofort-Druck/Versand"
                                styleClass="btnNeutral" action="#{uGastkarte.doNeueNrVergebenSofortDruck()}" />
                        </p:column>

                        <p:column rendered="#{eclGastM.alleZutrittsIdentsVorhanden}">
                            <h:outputLabel value="Weitere Karten-Nummern:" />
                        </p:column>
                        <p:column rendered="#{eclGastM.alleZutrittsIdentsVorhanden}">
                            <h:dataTable value="#{eclGastM.alleZutrittsIdents}" var="zutrittsIdent">

                                <h:column>
                                    <h:outputText value="#{zutrittsIdent.nummerAnzeige}" />
                                </h:column>

                                <h:column>
                                    <h:outputText value="Storniert" rendered="#{zutrittsIdent.storniert}" />
                                </h:column>

                            </h:dataTable>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldAnredeVerwenden>0}">
                            <h:outputLabel value="Anrede"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldAnredeVerwenden>0}">
                            <h:selectOneMenu value="#{eclGastM.anrede}">
                                <f:selectItems value="#{eclAnredeListeM.anredeListeM}" var="anrede"
                                    itemLabel="#{anrede.anredentext}" itemValue="#{anrede.anredennr}" />
                            </h:selectOneMenu>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldTitelVerwenden>0}">
                            <h:outputLabel value="Titel"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldTitelVerwenden>0}">
                            <h:inputText value="#{eclGastM.titel}" maxlength="30" size="32"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldAdelstitelVerwenden>0}">
                            <h:outputLabel value="Adelstitel"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldAdelstitelVerwenden>0}">
                            <h:inputText value="#{eclGastM.adelstitel}" maxlength="30" size="32"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldNameVerwenden>0}">
                            <h:outputLabel value="Name"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldNameVerwenden>0}">
                            <h:inputText value="#{eclGastM.name}" maxlength="80" size="82"></h:inputText>
                        </p:column>


                        <p:column rendered="#{uGastkarteSession.feldVornameVerwenden>0}">
                            <h:outputLabel value="Vorname"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldVornameVerwenden>0}">
                            <h:inputText value="#{eclGastM.vorname}" maxlength="80" size="82"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldZuHaendenVerwenden>0}">
                            <h:outputLabel value="#{uGastkarteSession.feldZuHaendenBezeichnung}"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldZuHaendenVerwenden>0}">
                            <h:inputText value="#{eclGastM.zuHdCo}" maxlength="80" size="82"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldZusatz1Verwenden>0}">
                            <h:outputLabel value="#{uGastkarteSession.feldZusatz1Bezeichnung}"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldZusatz1Verwenden>0}">
                            <h:inputText value="#{eclGastM.zusatz1}" maxlength="80" size="82"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldZusatz2Verwenden>0}">
                            <h:outputLabel value="#{uGastkarteSession.feldZusatz2Bezeichnung}"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldZusatz2Verwenden>0}">
                            <h:inputText value="#{eclGastM.zusatz2}" maxlength="80" size="82"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldStrasseVerwenden>0}">
                            <h:outputLabel value="Straße"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldStrasseVerwenden>0}">
                            <h:inputText value="#{eclGastM.strasse}" maxlength="80" size="82"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldLandVerwenden>0}">
                            <h:outputLabel value="Land"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldLandVerwenden>0}">
                            <h:inputText value="#{eclGastM.land}" maxlength="4" size="6"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldPLZVerwenden>0}">
                            <h:outputLabel value="Postleitzahl"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldPLZVerwenden>0}">
                            <h:inputText value="#{eclGastM.plz}" maxlength="20" size="22"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldOrtVerwenden>0}">
                            <h:outputLabel value="Ort"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldOrtVerwenden>0}">
                            <h:inputText value="#{eclGastM.ort}" maxlength="80" size="82"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldMailadresseVerwenden>0}">
                            <h:outputLabel value="Mailadresse"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldMailadresseVerwenden>0}">
                            <h:inputText value="#{eclGastM.mailadresse}" maxlength="80" size="82"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldKommunikationsspracheVerwenden>0}">
                            <!-- <h:outputLabel value="Kommunikationssprache"></h:outputLabel> -->
                            <h:outputLabel value="Insti-Ident"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldKommunikationsspracheVerwenden>0}">

                            <h:inputText value="#{eclGastM.kommunikationssprache}" maxlength="6" size="6"></h:inputText>
                            <!--
                            <h:selectOneMenu value="#{eclGastM.kommunikationssprache}">
                                <f:selectItems
                                    value="#{eclKommunikationsSpracheListeM.kommunikationsSpracheListeM}"
                                    var="sprache" itemLabel="#{sprache.sprache}"
                                    itemValue="#{sprache.sprachennr}" />
                            </h:selectOneMenu>
                            -->
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldGruppeVerwenden>0}">
                            <h:outputLabel value="Gruppe"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldGruppeVerwenden>0}">
                            <h:selectOneMenu value="#{eclGastM.gruppe}">
                                <f:selectItems value="#{eclGruppeListeM.gruppeListeM}" var="gruppe"
                                    itemLabel="#{gruppe.gruppenText}" itemValue="#{gruppe.gruppenNr}" />
                            </h:selectOneMenu>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0}">
                            <h:outputLabel value="Ausstellungsgrund"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0}">
                            <h:selectOneMenu value="#{eclGastM.neuerAusstellungsgrund}">
                                <f:selectItems value="#{eclAusstellungsgrundListeM.ausstellungsgrundListeM}"
                                    var="ausstellungsgrund" itemLabel="#{ausstellungsgrund.beschreibung}"
                                    itemValue="#{ausstellungsgrund.kuerzel}" />
                            </h:selectOneMenu>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0}">
                            <h:outputLabel value="Ausstellungsgrund Kommentar"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0}">
                            <h:inputText value="#{eclGastM.neuerAusstellungsgrundKommentar}" maxlength="80" size="82">
                            </h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0}">
                            <h:outputLabel value=""></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0}">
                            <h:commandButton value="Weiteren Ausstellungsgrund hinzufügen" styleClass="btnNeutral"
                                action="#{uGastkarte.doWeitererAusstellungsgrund()}" />
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0}">
                            <h:outputLabel value=""></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldAusstellungsgrundVerwenden>0}">
                            <h:dataTable value="#{eclGastM.ausstellungsgrundListe}" var="ausstellungsgrund"
                                styleClass="tblKennzeichen"
                                columnClasses="tblKennzeichenC00, tblKennzeichenC01, tblKennzeichenC02"
                                rowClasses="leftText">

                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Kürzel" style="float: left" />
                                    </f:facet>
                                    <h:outputText value="#{ausstellungsgrund.ausstellungsGrundKuerzel}" />
                                </h:column>

                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Beschreibung" style="float: left" />
                                    </f:facet>
                                    <h:outputText value="#{ausstellungsgrund.beschreibung}" />
                                </h:column>

                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Kommentar" style="float: left" />
                                    </f:facet>
                                    <h:outputText value="#{ausstellungsgrund.kommentar}" />
                                </h:column>

                            </h:dataTable>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldVipVerwenden>0}">
                            <h:outputLabel value="VIP-Kennzeichen"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldVipVerwenden>0}">
                            <h:selectOneMenu value="#{eclGastM.neuesVipKZ}">
                                <f:selectItems value="#{eclVipKZListeM.vipKZListeM}" var="vipKZ"
                                    itemLabel="#{vipKZ.beschreibung}" itemValue="#{vipKZ.kuerzel}" />
                            </h:selectOneMenu>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldVipVerwenden>0}">
                            <h:outputLabel value="VIP-Kennzeichen - Meldungstext"></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldVipVerwenden>0}">
                            <h:inputText value="#{eclGastM.neuesVipKZKommentar}" maxlength="80" size="82"></h:inputText>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldVipVerwenden>0}">
                            <h:outputLabel value=""></h:outputLabel>
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.feldVipVerwenden>0}">
                            <h:commandButton value="Weiteres VIP-Kennzeichen hinzufügen" styleClass="btnNeutral"
                                action="#{uGastkarte.doWeiteresVipKZ()}" />
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.feldVipVerwenden>0}">
                            <h:outputLabel value="" />
                        </p:column>


                        <p:column rendered="#{uGastkarteSession.feldVipVerwenden>0}">
                            <h:dataTable value="#{eclGastM.vipKZListe}" var="vipKZ"
                                columnClasses="tblKennzeichenC00, tblKennzeichenC01, tblKennzeichenC02"
                                rowClasses="leftText" styleClass="tblKennzeichen">

                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{msg.Kuerzel}" style="float: left" />
                                    </f:facet>
                                    <h:outputText value="#{vipKZ.vipKZKuerzel}" />
                                </h:column>

                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{msg.Beschreibung}" style="float: left" />
                                    </f:facet>
                                    <h:outputText value="#{vipKZ.beschreibung}" />
                                </h:column>

                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="#{msg.Kommentar}" style="float: left" />
                                    </f:facet>
                                    <h:outputText value="#{vipKZ.parameter}" />
                                </h:column>

                            </h:dataTable>
                        </p:column>

                        <p:column rendered="#{uGastkarteSession.gruppenausstellung}">
                            <h:outputLabel value="zugeordnete Gastkarten" />
                        </p:column>
                        <p:column rendered="#{uGastkarteSession.gruppenausstellung}">
                            <h:dataTable value="#{eclGastM.meldungenMeldungenListe}" var="meldungenMeldungen"
                                columnClasses="tblPerson2C00, tblPerson2C01, tblPerson2C02, tblPerson2C03"
                                rowClasses="leftText" styleClass="tblPerson2">

                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Gastkarten-Nr" />
                                    </f:facet>
                                    <h:outputText value="#{meldungenMeldungen.zutrittsIdent}" style="float: left" />
                                </h:column>

                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Name" />
                                    </f:facet>
                                    <h:outputText value="#{meldungenMeldungen.name}" style="float: left" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Vorname" />
                                    </f:facet>
                                    <h:outputText value="#{meldungenMeldungen.vorname}" style="float: left" />
                                </h:column>
                                <h:column>
                                    <f:facet name="header">
                                        <h:outputText value="Ort" />
                                    </f:facet>
                                    <h:outputText value="#{meldungenMeldungen.ort}" style="float: left" />
                                </h:column>


                            </h:dataTable>
                        </p:column>


                    </p:panelGrid>

                </div>

                <table class="divButtons">
                    <tr>
                        <td class="divButtonsLeft"></td>
                        <td class="divButtonsCenter"></td>
                        <td class="divButtonsRight">
                            <h:panelGroup rendered="#{uGastkarteSession.buttonSpeichernAnzeigen}">
                                <h:commandButton value="Speichern" styleClass="btnStandard"
                                    action="#{uGastkarte.doSpeichernAendern()}" />
                                <br />
                                <br />
                            </h:panelGroup>
                            <h:panelGroup rendered="#{uGastkarteSession.buttonSpeichernDruckenAnzeigen}">
                                <h:commandButton value="Speichern und neu erstellen" styleClass="btnStandard"
                                    action="#{uGastkarte.doSpeichernErstellenAendern()}" />
                            </h:panelGroup>
                        </td>
                    </tr>
                </table>
            </h:form>
        </ui:define>
    </ui:composition>